# 使用指南

## 账户设置

### 免费版

- 无需许可证
- 只能同时录制 1 场直播

### 高级版

- 需要激活许可证
- 可同时录制任意场直播
- 最高的视频质量（HD+）
- 直播开始时自动开启录制
- 自动保存观看列表
- 自动 mp4 重新编码
- ...

**OlivedPro** 订阅服务提供三种方案：

- **$9.99 每月许可证**，赠送一周免费试用期
- **$39.99 一年许可证**一次性付款
- **$69.99 终身许可证**一次性付款

可以在 https://pay.olived.app/ 购买许可证，购买成功会立刻发送许可证到您的邮箱中。  
在许可证激活后将会解锁所有功能。每个许可证可以激活两台电脑同时使用，若您更换新的电脑，也可以在订单页面取消激活许可证（这时旧的电脑中的许可证将会失效），再在新的电脑中重新激活。  
本商品为虚拟商品，购买后恕不退换。请确保它满足您的使用需求后再购买。  
如果您在支付过程中遇到任何问题，可以联系客服进行代充。客服QQ：2448842973。

如果您有任何疑问或需要帮助，请通过以下邮箱联系我们：olivedapp@outlook.com。我们将尽快为您提供帮助。

## 视频教程

B 站搜索 OlivedApp 或点击视频链接：https://space.bilibili.com/3493276105575275

## 任务列表 

### 链接任务

默认情况只需要粘贴 url，就会自动解析出其他配置项，无需手动填入。若没有立刻自动解析，请等待几秒，若还是没有成功自动解析，请检查 url 格式是否正确和网络是否通畅。

每个平台的 url 格式都是不同的，只有正确的 url 格式才可以被解析，url 格式可在直播平台页面进行查看。

部分平台需要填写 cookie 值才能进行监控，需要填写 cookie 值的平台可以在直播平台页面进行查看。

可根据需要修改相应的配置项，现已支持以下的功能：

- 自动转码为 MP4 格式
- 在文件满足一定大小或播放时长满足一定条件时自动切割
- 部分平台需要 cookie 配置
- 自定义下载生成的文件名
- 自定义代理
- 自定义存储路径
- 自定义下载器（最好使用默认的下载器，不是每个下载器都支持所有平台的）

### 获取快照

点击获取快照可以获得当前直播的详细信息，在反馈问题时使用。

### 后置命令

后置命令本质上是一个脚本文件，将会在录制结束时执行，用于满足一些定制化的需求。  
点击测试运行会模拟执行填入的后置命令。

windows 平台：后置命令是 bat 脚本

* 通过 `%ffmpeg%` 调用 ffmpeg
* 通过 `%record%` 获取到录制文件的绝对路径（注：文件名不要包含中文字符，否则可能会执行命令失败。）
* 其它自定义命令

```sh
# 每 60s 切割一下视频文件
%ffmpeg% -i "%record%" -c copy -f segment -segment_time 60 -reset_timestamps 1 -map 0 "%record%_%%d.mp4"
```

```sh
# 将文件移动到目标目录
for %%a in ("%record%") do set filename=%%~nxa
echo %filename%
# C:\Users\Administrator\Downloads\olivedpro_downloads\ 是目标目录
move %record% "C:\Users\Administrator\Downloads\olivedpro_downloads\%filename%"
```

mac 平台：后置命令是 bash 脚本

* 通过 `$ffmpeg` 调用 ffmpeg
* 通过 `$record` 获取到录制文件的绝对路径
* 其它自定义命令

```sh
# 每 60s 切割一下视频文件
$ffmpeg -i "$record" -c copy -f segment -segment_time 60 -reset_timestamps 1 -map 0 "$record""_%d.flv"
```

```sh
# 将文件移动到目标目录
mv "$record" /Users/mac/Downloads/
```

## 偏好配置

### 个人中心

* 激活许可证后可解锁全部功能
* 点击导出配置文件可将软件的所有配置保存在本地，用于备份或迁移到另一台电脑。
* 点击导入配置文件可用本地的配置文件覆盖当前配置，旧的录制任务都会被清空。

### 基础配置

* 外观：修改主题颜色
* 语言：修改默认语言

### 进阶配置

* 代理：若因网络问题无法正常录制直播内容，则需要设置代理。开启使用代理服务器，并填入以下内容。若不清楚如何查看端口号，可在搜索引擎中搜索您的操作系统下如何查看代理端口号，很容易找到。（注：本软件不含代理的功能，代理功能都由第三方代理软件实现。）
   ```
   http://127.0.0.1:您自己代理软件用的端口号（如7890，1080，10809等等）
   ```
* 检测间隔：检测主播是否正在直播的间隔时间，单位是秒
* 文件名模版：可以根据需要修改默认的文件名模版
   - 日期: `{{ now | date \"2006-01-02 15-04-05\"}}`
   - 主播名称: `{{ .StreamerName }}`
   - 直播标题: `{{ .RoomName }}`
   - 直播平台: `{{ .SiteName }}`
   - 房间号: `{{ .RoomID }}`
* Cookies：全局的 cookie 配置，如下配置的含义是，在录制 aatv 时使用 cookie 值 cookie1，在录制 bbtv 时使用 cookie 值 cookie2，以此类推。
   ```sh
   aatv: cookie1
   bbtv: cookie2
   cctv: cookie3
   ```
* 后置命令：全局配置（详细说明请见前文）
* 默认下载路径：视频文件的默认下载路径
* 编码：录制结束后是否转换成MP4格式
* 自动删除小文件：录制结束后的文件小于该配置大小将会被删除，若不想删除可以配置为 0.01
* 应用日志路径：反馈问题时使用

## 常见问题

### 都支持录制哪些直播平台？

可在上方的直播平台页面查看。

### 如何获取 cookie 值？

1. 打开开发人员工具：在想要获取 cookie 的页面处，按 F12 或是 Ctrl+shift+I 键或是按照下图操作步骤，打开开发人员工具。

   ![image](/img/guide/zh-Hans/1.png)

2. 找到工具栏中的控制台，在控制台中输入如下代码，输入后按 enter 键：

   ```sh
   console.log(document.cookie)
   ```

   ![image](/img/guide/zh-Hans/2.png)

3. 输出的内容就是 cookie 值了。

### 如何获取 tiktok cookie 值？

在正常情况下，您无需填充此项。但当您尝试录制 tiktok 直播失败时，请按如下步骤获取到 cookie 填入 cookie 项中。

![image](/img/guide/zh-Hans/5.png)

1. 如图所示，在浏览器中打开 https://www.tiktok.com/@rony3599/live

2. 搜索 https://webcast.tiktok.com/webcast/room/enter/

3. 在搜索出的 Response 里搜索 id_str

4. cookie 值即为拼接成的 rony3599=7274984685763365634;

5. 将 cookie 填入 cookie 项中

### 如何更换电脑？

如果您愿意，可以随时切换到新电脑。

首先使用您的电子邮件地址登录 https://app.lemonsqueezy.com/my-orders/ 页面，找到与您的用户 ID 匹配的激活项，然后点击停用按钮。仅此而已，现在您就可以使用许可证密钥激活新电脑了。

![image](/img/guide/zh-Hans/3.png)

![image](/img/guide/zh-Hans/4.png)

### 如何取消月度会员的自动续约？

使用您的电子邮件地址登录 https://app.lemonsqueezy.com/my-orders/ 页面，您将能够在该页面上取消订阅。

### 哔哩哔哩直播如何提高录制的画质？

在直播间的页面打开，如下图所示找到cookie填入即可。

![image](/img/guide/zh-Hans/5.png)

![image](/img/guide/zh-Hans/6.png)

### 如何反馈遇到的问题？

按照以下的格式填写相关的内容，发送邮件到 olivedapp@outlook.com

1. 填写基本信息，包括软件版本号、电脑系统信息和直播链接。

2. 使用`获取快照`功能并截图

3. 描述问题，可以附带相关的截图或视频。

4. 附带日志，日志的位置可以在进阶设置的最下面看到。日志文件名称为 olivedpro.log（一定存在）和 panic.log（不一定存在）。
